<!DOCTYPE html>
<html>

<head>
	<TITLE> FR </TITLE>
	<META CHARSET ="UTF-8">
	<META Name="Keywords" Content="GL">
	<style>
	body {
		background-color: lightgrey;
	}
	table {
	background-color:rgb(200, 191, 231);
	width: 40%;
	table-layout: fixed;
	margin:auto;
	

	}
	table, td, th {
		border: 1px solid #ddd;
		text-align: left;

	}

	table {
		border-collapse: collapse;
		border: 5px solid black;
	
	}

	th {
		text-align: left;
	}
	td {
		height: 40px;
		padding: 5px;
	}
	</style>
</head>

<body>
	<div align="center">
		<img src="Meteo.png" alt="Logo" width="800" height="300">
	</div>
	<br>

<body background="emt.jpg">
  <div id="weather">
    <table class="cc">
    <tr>
        <td>CITY:</td>
        <td >COUNTRY:</td>

    </tr>
    <tr>
        <td><input type="text" id="city"></td>
        <td><input type="text" id="country"></td>
    </tr>
    </table>
  </div>

  <div class="data">
    <table class="dataTable">
    <tr>
        <td>Temperature:</td>
        <td id="temp"></td>
    </tr>
    <tr>
        <td>Humidity:</td>
        <td id="hum"></td>
    </tr>
    <tr>
        <td>Population:</td>
        <td id="pop"></td>
    </tr>
    <tr>
        <td>Presure:</td>
        <td id="pre"></td>
    </tr>
    <tr>
        <td>Sea level:</td>
        <td id="slv"></td>
    </tr>
    <tr>
        <td>Wind Deg:</td>
        <td id="tpm"></td>
    </tr>
	<tr>
        <td>Wind Speed:</td>
        <td id="tpn"></td>
    </tr>
    <tr>
        <td colspan="2"><div><button class="sendButton" name="Send" onclick="getWeather()">SEND</button></div></td>
    </tr>
    </table>
  </div>
</div>

<script>
function getWeather() {
let city = document.getElementById('city').value;
let country = document.getElementById('country').value;
console.log('city: '+city+'  country:'+country);
let appid="88db404e65c27397d0ad0c6fb6f383a9";
let req="http://api.openweathermap.org/data/2.5/forecast?";
req=req+"q="+city;
req=req+","+country;
req=req+"&mode=HTML";
req=req+"&appid="+appid;
console.log(req);
let xhttp=new XMLHttpRequest();
xhttp.onreadystatechange = function(){
  if (this.readyState ==4 && this.status ==200){
    let obj=JSON.parse(this.responseText);
    document.getElementById("temp").innerHTML =
    Math.round((obj.list[0].main.temp-273.15)*100)/100;
	console.log(obj);
	document.getElementById("hum").innerHTML = Math.round(obj.list[1].main.humidity);
	document.getElementById("pop").innerHTML = Math.round(obj.city.population);
	document.getElementById("pre").innerHTML = Math.round(obj.list[1].main.pressure);
	document.getElementById("slv").innerHTML = Math.round(obj.list[1].main.sea_level);
	document.getElementById("tpm").innerHTML = Math.round(obj.list[1].wind.deg);
	document.getElementById("tpn").innerHTML = Math.round(obj.list[1].wind.speed);
	}
};
	
xhttp.open("GET", req,true);
xhttp.send();
}
</script>
</body>

</html>